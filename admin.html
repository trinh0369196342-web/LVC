<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng Qu·∫£n Tr·ªã - Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        .hidden { display: none !important; }
        .fade-in { animation: fadeIn 0.3s; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        /* Hi·ªáu ·ª©ng cho h√†ng khi hover */
        tr:hover td { background-color: #f9fafb; }
    </style>
</head>
<body class="bg-gray-100 font-sans h-screen flex overflow-hidden">

    <aside class="w-64 bg-gray-900 text-white flex flex-col">
        <div class="p-4 text-center font-bold text-xl border-b border-gray-700">
            ADMIN PANEL
        </div>
        <nav class="flex-1 p-4 space-y-2">
            <button onclick="switchView('orders')" id="nav-orders" class="w-full text-left p-3 rounded hover:bg-gray-800 bg-gray-800">üì¶ Qu·∫£n l√Ω ƒê∆°n h√†ng</button>
            <button onclick="switchView('users')" id="nav-users" class="w-full text-left p-3 rounded hover:bg-gray-800">üë• Qu·∫£n l√Ω T√†i kho·∫£n</button>
            <button onclick="switchView('settings')" id="nav-settings" class="w-full text-left p-3 rounded hover:bg-gray-800">‚öôÔ∏è C·∫•u h√¨nh Gi√°</button>
        </nav>
        <div class="p-4 border-t border-gray-700">
            <div class="flex items-center gap-2 mb-4">
                <div class="w-8 h-8 rounded-full bg-green-500"></div>
                <div>
                    <p class="text-sm font-bold" id="admin-name">Admin</p>
                    <p class="text-xs text-green-400">ƒêang ho·∫°t ƒë·ªông</p>
                </div>
            </div>
            <button onclick="logout()" class="w-full bg-red-600 py-2 rounded hover:bg-red-700 text-sm">ƒêƒÉng xu·∫•t</button>
        </div>
    </aside>

    <main class="flex-1 flex flex-col overflow-hidden">
        
        <header class="bg-white shadow p-4 z-10 flex justify-between items-center">
            <h2 id="page-title" class="text-xl font-bold text-gray-800">Qu·∫£n l√Ω ƒê∆°n h√†ng</h2>
        </header>

        <div class="flex-1 overflow-auto p-6 relative">
            
            <div id="view-orders" class="fade-in">
                
                <div class="flex flex-col md:flex-row gap-4 mb-4 justify-between">
                    <div class="relative w-full md:w-1/3">
                        <input type="text" id="search-input" oninput="handleSearch()" placeholder="üîç T√¨m t√™n, email ho·∫∑c m√£ ƒë∆°n..." class="w-full pl-10 pr-4 py-2 border rounded shadow-sm focus:outline-none focus:border-blue-500">
                        <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none text-gray-400">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg>
                        </div>
                    </div>

                    <div class="flex gap-2 overflow-x-auto pb-2">
                        <button onclick="filterOrders('all')" class="whitespace-nowrap px-3 py-2 rounded bg-gray-200 hover:bg-gray-300 text-sm font-medium">T·∫•t c·∫£</button>
                        <button onclick="filterOrders('pending')" class="whitespace-nowrap px-3 py-2 rounded bg-yellow-100 text-yellow-800 text-sm font-bold border border-yellow-200">M·ªõi</button>
                        <button onclick="filterOrders('processing')" class="whitespace-nowrap px-3 py-2 rounded bg-blue-100 text-blue-800 text-sm border border-blue-200">ƒêang x·ª≠ l√Ω</button>
                        <button onclick="filterOrders('payment_pending')" class="whitespace-nowrap px-3 py-2 rounded bg-orange-100 text-orange-800 text-sm border border-orange-200">Ch·ªù TT</button>
                    </div>
                </div>

                <div class="bg-white rounded shadow overflow-hidden">
                    <table class="w-full text-left border-collapse">
                        <thead class="bg-gray-50 text-gray-600 text-sm uppercase">
                            <tr>
                                <th class="p-4 border-b">M√£ / Th·ªùi gian</th>
                                <th class="p-4 border-b">Kh√°ch h√†ng</th>
                                <th class="p-4 border-b">Chi ti·∫øt ƒë∆°n</th>
                                <th class="p-4 border-b">T·ªïng ti·ªÅn</th>
                                <th class="p-4 border-b">Tr·∫°ng th√°i</th>
                                <th class="p-4 border-b">H√†nh ƒë·ªông</th>
                            </tr>
                        </thead>
                        <tbody id="orders-table-body" class="text-sm text-gray-700">
                            </tbody>
                    </table>
                    <div id="no-result" class="hidden p-8 text-center text-gray-500">
                        Kh√¥ng t√¨m th·∫•y ƒë∆°n h√†ng n√†o kh·ªõp v·ªõi t·ª´ kh√≥a.
                    </div>
                </div>
            </div>

            <div id="view-users" class="hidden fade-in">
                <div class="bg-white rounded shadow overflow-hidden">
                    <table class="w-full text-left">
                        <thead class="bg-gray-50 text-gray-600 text-sm uppercase">
                            <tr>
                                <th class="p-4">Avatar</th>
                                <th class="p-4">Email / T√™n</th>
                                <th class="p-4">Vai tr√≤ (Role)</th>
                                <th class="p-4">Ng√†y tham gia</th>
                                <th class="p-4">H√†nh ƒë·ªông</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body">
                            </tbody>
                    </table>
                </div>
            </div>

            <div id="view-settings" class="hidden fade-in max-w-lg">
                <div class="bg-white p-6 rounded shadow">
                    <h3 class="font-bold text-lg mb-4 text-blue-800">B·∫£ng gi√° G·ªëc (H·ªá th·ªëng)</h3>
                    <label class="block mb-2 text-sm font-medium">Gi√° in gi·∫•y (VNƒê/Trang)</label>
                    <input type="number" id="set-page-price" class="w-full border p-2 rounded mb-4">
                    <label class="block mb-2 text-sm font-medium">Gi√° in b·∫£ng ch·ªØ (VNƒê/B·∫£ng)</label>
                    <input type="number" id="set-board-price" class="w-full border p-2 rounded mb-4">
                    <label class="block mb-2 text-sm font-medium">Ph√≠ tƒÉng th√™m ƒë·ªô ƒë·∫≠m (%)</label>
                    <input type="number" id="set-density" class="w-full border p-2 rounded mb-6">
                    <button onclick="saveSettings()" class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700">L∆∞u C·∫•u H√¨nh</button>
                </div>
            </div>

        </div>
    </main>

    <div id="modal-price" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded w-96 shadow-lg">
            <h3 class="font-bold text-lg mb-4">Ch·ªânh s·ª≠a gi√° ƒë∆°n h√†ng</h3>
            <p class="text-sm text-gray-500 mb-2">Gi√° g·ªëc m√°y t√≠nh: <span id="modal-org-price" class="font-bold"></span></p>
            <label class="block text-sm font-medium">Gi√° ch·ªët th·ª±c t·∫ø (VNƒê)</label>
            <input type="number" id="modal-new-price" class="w-full border p-2 rounded mb-3 font-bold text-red-600">
            <label class="block text-sm font-medium">L√Ω do ƒëi·ªÅu ch·ªânh</label>
            <input type="text" id="modal-reason" class="w-full border p-2 rounded mb-4" placeholder="VD: File t·ªën m·ª±c, Kh√°ch quen gi·∫£m gi√°...">
            <div class="flex justify-end gap-2">
                <button onclick="document.getElementById('modal-price').classList.add('hidden')" class="bg-gray-200 px-4 py-2 rounded">H·ªßy</button>
                <button onclick="confirmUpdatePrice()" class="bg-blue-600 text-white px-4 py-2 rounded">C·∫≠p nh·∫≠t</button>
            </div>
        </div>
    </div>

    <script src="script_admin..js"></script>
    <script>
        // --- BI·∫æN TO√ÄN C·ª§C ---
        let allOrders = []; // Ch·ª©a t·∫•t c·∫£ ƒë∆°n
        let displayedOrders = []; // Ch·ª©a ƒë∆°n ƒëang hi·ªÉn th·ªã (sau khi l·ªçc/t√¨m)
        let editingOrderId = null;
        let originalPriceRef = 0;

        // --- KH·ªûI T·∫†O & AUTH ---
        async function initAdmin() {
            const { data: { user } } = await _supabase.auth.getUser();
            if (!user) return window.location.href = 'index.html';

            const { data: profile } = await _supabase.from('profiles').select('role, full_name').eq('id', user.id).single();
            if (profile.role !== 'admin') {
                alert("B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p trang n√†y!");
                return window.location.href = 'index.html';
            }

            document.getElementById('admin-name').innerText = profile.full_name || user.email;
            
            loadOrders();
            setupRealtime();
        }
        initAdmin();

        function switchView(viewId) {
            ['orders', 'users', 'settings'].forEach(v => {
                document.getElementById('view-' + v).classList.add('hidden');
                document.getElementById('nav-' + v).classList.remove('bg-gray-800');
            });
            document.getElementById('view-' + viewId).classList.remove('hidden');
            document.getElementById('nav-' + viewId).classList.add('bg-gray-800');
            const titles = { 'orders': 'Qu·∫£n l√Ω ƒê∆°n h√†ng', 'users': 'Qu·∫£n l√Ω T√†i kho·∫£n', 'settings': 'C·∫•u h√¨nh' };
            document.getElementById('page-title').innerText = titles[viewId];
            if(viewId === 'users') loadUsers();
            if(viewId === 'settings') loadSettingsAdmin();
        }

        async function logout() {
            await _supabase.auth.signOut();
            window.location.href = 'index.html';
        }

        // --- PH·∫¶N 1: QU·∫¢N L√ù ƒê∆†N H√ÄNG ---
        async function loadOrders() {
            const { data, error } = await _supabase
                .from('orders')
                .select(`*, profiles(full_name, email)`) 
                .order('created_at', { ascending: false });
            
            if (data) {
                allOrders = data;
                displayedOrders = data; // M·∫∑c ƒë·ªãnh hi·ªÉn th·ªã h·∫øt
                renderOrders(data);
            }
        }

        // --- T√çNH NƒÇNG: T√åM KI·∫æM ---
        function handleSearch() {
            const term = document.getElementById('search-input').value.toLowerCase();
            
            // L·ªçc danh s√°ch d·ª±a tr√™n t√™n, email ho·∫∑c ID
            displayedOrders = allOrders.filter(o => {
                const name = (o.profiles?.full_name || '').toLowerCase();
                const email = (o.profiles?.email || '').toLowerCase();
                const id = o.id.toLowerCase();
                return name.includes(term) || email.includes(term) || id.includes(term);
            });
            
            renderOrders(displayedOrders);
        }

        // --- T√çNH NƒÇNG: L·ªåC TR·∫†NG TH√ÅI ---
        function filterOrders(status) {
            document.getElementById('search-input').value = ''; // Reset thanh t√¨m ki·∫øm
            if (status === 'all') displayedOrders = allOrders;
            else displayedOrders = allOrders.filter(o => o.status === status);
            renderOrders(displayedOrders);
        }

        function renderOrders(orders) {
            const tbody = document.getElementById('orders-table-body');
            tbody.innerHTML = '';

            // ·∫®n/Hi·ªán th√¥ng b√°o kh√¥ng t√¨m th·∫•y
            if(orders.length === 0) {
                document.getElementById('no-result').classList.remove('hidden');
            } else {
                document.getElementById('no-result').classList.add('hidden');
            }

            const statusDict = {
                'pending': '<span class="px-2 py-1 rounded bg-yellow-100 text-yellow-800 text-xs font-bold">M·ªöI</span>',
                'processing': '<span class="px-2 py-1 rounded bg-blue-100 text-blue-800 text-xs font-bold">ƒêANG X·ª¨ L√ù</span>',
                'payment_pending': '<span class="px-2 py-1 rounded bg-orange-100 text-orange-800 text-xs font-bold">CH·ªú THANH TO√ÅN</span>',
                'paid': '<span class="px-2 py-1 rounded bg-green-50 text-green-600 text-xs font-bold">ƒê√É TR·∫¢ TI·ªÄN</span>',
                'completed': '<span class="px-2 py-1 rounded bg-green-100 text-green-800 text-xs font-bold">HO√ÄN TH√ÄNH</span>',
                'cancelled': '<span class="px-2 py-1 rounded bg-gray-200 text-gray-500 text-xs font-bold">ƒê√É H·ª¶Y</span>',
            };

            orders.forEach(o => {
                const tr = document.createElement('tr');
                tr.className = "border-b hover:bg-gray-50 group"; // Th√™m class group ƒë·ªÉ hover

                // N·ªôi dung chi ti·∫øt
                let details = '';
                if(o.type === 'file') {
                    details = `
                        <div class="text-sm">
                            <span class="font-bold text-blue-600">[IN FILE]</span> <a href="#" class="underline text-blue-500">T·∫£i xu·ªëng</a><br>
                            ‚Ä¢ ${o.page_count} trang, C·ª° ${o.font_size}, ${o.is_landscape ? 'Ngang' : 'D·ªçc'}
                        </div>`;
                } else {
                    details = `
                        <div class="text-sm">
                            <span class="font-bold text-green-600">[IN CH·ªÆ]</span> (${o.board_count} b·∫£ng)<br>
                            ‚Ä¢ P.${o.room_number || '?'} - T.${o.floor_number || '?'}<br>
                            <button onclick="smartCopy('${o.id}')" class="mt-1 text-xs border border-blue-500 text-blue-500 px-2 rounded hover:bg-blue-50">üìã Sao ch√©p</button>
                        </div>`;
                }

                // C·ªôt H√†nh ƒë·ªông
                let actions = `<div class="flex flex-col gap-2">`;
                
                if (o.status === 'pending') {
                    actions += `<button onclick="updateStatus('${o.id}', 'processing')" class="bg-blue-600 text-white px-2 py-1 text-xs rounded">Nh·∫≠n ƒë∆°n</button>`;
                    actions += `<button onclick="updateStatus('${o.id}', 'cancelled')" class="bg-gray-400 text-white px-2 py-1 text-xs rounded">H·ªßy b·ªè</button>`;
                } 
                else if (o.status === 'processing') {
                    actions += `<button onclick="openPriceModal('${o.id}', ${o.original_price}, ${o.adjustment_fee})" class="bg-yellow-500 text-white px-2 py-1 text-xs rounded">‚úèÔ∏è Ch·ªânh gi√°</button>`;
                    actions += `<button onclick="requestPayment('${o.id}', '${o.user_id}', ${o.final_price})" class="bg-indigo-600 text-white px-2 py-1 text-xs rounded">Y√™u c·∫ßu T.To√°n</button>`;
                }
                else if (o.status === 'payment_pending') {
                    actions += `<button onclick="updateStatus('${o.id}', 'paid')" class="bg-green-500 text-white px-2 py-1 text-xs rounded">ƒê√£ nh·∫≠n ti·ªÅn</button>`;
                }
                else if (o.status === 'paid') {
                     actions += `<button onclick="updateStatus('${o.id}', 'completed')" class="bg-green-700 text-white px-2 py-1 text-xs rounded">Ho√†n th√†nh</button>`;
                }
                
                // --- N√öT X√ìA ƒê∆†N H√ÄNG (ƒê√£ th√™m l·∫°i) ---
                actions += `<button onclick="deleteOrder('${o.id}')" class="text-red-500 text-xs hover:text-red-700 hover:underline border border-transparent hover:border-red-200 rounded py-1 flex justify-center items-center gap-1">üóëÔ∏è X√≥a ƒë∆°n</button>`;
                
                actions += `</div>`;

                let priceDisplay = `<div class="font-bold">${formatCurrency(o.final_price)}</div>`;
                if(o.adjustment_fee !== 0) {
                    priceDisplay += `<div class="text-xs text-red-500 italic">(${o.adjustment_fee > 0 ? '+' : ''}${formatCurrency(o.adjustment_fee)})</div>`;
                }

                tr.innerHTML = `
                    <td class="p-4 text-xs text-gray-500">${o.id.slice(0,6)}...<br>${formatDate(o.created_at)}</td>
                    <td class="p-4 font-medium">${o.profiles?.full_name || 'No Name'}<br><span class="text-xs text-gray-400">${o.profiles?.email}</span></td>
                    <td class="p-4">${details}</td>
                    <td class="p-4">${priceDisplay}</td>
                    <td class="p-4">${statusDict[o.status]}</td>
                    <td class="p-4">${actions}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // --- C√ÅC H√ÄM H√ÄNH ƒê·ªòNG ---

        async function updateStatus(orderId, newStatus) {
            await _supabase.from('orders').update({ status: newStatus }).eq('id', orderId);
            // Realtime s·∫Ω t·ª± reload
        }

        // --- H√ÄM X√ìA ƒê∆†N H√ÄNG (QUAN TR·ªåNG) ---
        async function deleteOrder(id) {
            if(!confirm("C·∫¢NH B√ÅO: B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën X√ìA Vƒ®NH VI·ªÑN ƒë∆°n h√†ng n√†y?\n(Kh√¥ng th·ªÉ kh√¥i ph·ª•c l·∫°i)")) return;
            
            const { error } = await _supabase.from('orders').delete().eq('id', id);
            
            if (error) {
                alert("L·ªói: " + error.message);
            } else {
                // X√≥a th√†nh c√¥ng, c·∫≠p nh·∫≠t UI ngay l·∫≠p t·ª©c
                allOrders = allOrders.filter(o => o.id !== id);
                handleSearch(); // Render l·∫°i view hi·ªán t·∫°i
            }
        }

        function smartCopy(orderId) {
            const order = allOrders.find(o => o.id === orderId);
            if (!order || !order.boards_data) return;
            let text = "";
            order.boards_data.forEach(b => { text += `${b.subject}\n${b.content}\n\n`; });
            navigator.clipboard.writeText(text).then(() => { alert("ƒê√£ sao ch√©p n·ªôi dung!"); });
        }

        function openPriceModal(orderId, original, fee) {
            editingOrderId = orderId;
            originalPriceRef = original;
            document.getElementById('modal-org-price').innerText = formatCurrency(original);
            document.getElementById('modal-new-price').value = original + fee;
            document.getElementById('modal-reason').value = "";
            document.getElementById('modal-price').classList.remove('hidden');
        }

        async function confirmUpdatePrice() {
            const newPrice = parseInt(document.getElementById('modal-new-price').value);
            const reason = document.getElementById('modal-reason').value;
            const adjustment_fee = newPrice - originalPriceRef;
            await _supabase.from('orders').update({ adjustment_fee: adjustment_fee, adjustment_reason: reason }).eq('id', editingOrderId);
            document.getElementById('modal-price').classList.add('hidden');
        }

        async function requestPayment(orderId, userId, amount) {
            if(!confirm(`X√°c nh·∫≠n y√™u c·∫ßu kh√°ch thanh to√°n ${formatCurrency(amount)}?`)) return;
            await _supabase.from('orders').update({ status: 'payment_pending' }).eq('id', orderId);
            const qrLink = `https://img.vietqr.io/image/MB-0000000000-compact.jpg?amount=${amount}&addInfo=Don Hang ${orderId.slice(0,5)}`;
            await _supabase.from('messages').insert({
                sender_id: (await _supabase.auth.getUser()).data.user.id,
                content: `ƒê∆°n h√†ng c·ªßa b·∫°n ƒë√£ s·∫µn s√†ng. Vui l√≤ng thanh to√°n s·ªë ti·ªÅn: ${formatCurrency(amount)}. Qu√©t m√£ b√™n d∆∞·ªõi:`,
                image_url: qrLink,
                is_admin: true
            });
            alert("ƒê√£ g·ª≠i y√™u c·∫ßu thanh to√°n!");
        }

        // --- PH·∫¶N 2: QU·∫¢N L√ù USER ---
        async function loadUsers() {
            const { data: users } = await _supabase.from('profiles').select('*').order('created_at');
            const tbody = document.getElementById('users-table-body');
            tbody.innerHTML = '';

            users.forEach(u => {
                const isMyAccount = u.email === document.getElementById('admin-name').innerText;
                let roleButton = '';
                
                if (u.role === 'customer') {
                    roleButton = `<button onclick="changeRole('${u.id}', 'admin')" class="text-blue-500 border border-blue-500 px-2 rounded text-xs hover:bg-blue-50">üîº C·∫•p quy·ªÅn Admin</button>`;
                } else {
                    roleButton = `<span class="text-green-600 font-bold text-xs">Admin</span>`;
                    if(!isMyAccount) roleButton += ` <button onclick="changeRole('${u.id}', 'customer')" class="text-gray-400 text-xs ml-2 hover:text-red-500">üîΩ H·∫° quy·ªÅn</button>`;
                }
                const deleteBtn = `<button onclick="deleteUser('${u.id}')" class="text-red-500 hover:text-red-700 ml-4 font-bold">üóëÔ∏è X√≥a</button>`;

                tbody.innerHTML += `
                    <tr class="border-b">
                        <td class="p-4"><img src="${u.avatar_url}" class="w-8 h-8 rounded-full bg-gray-300"></td>
                        <td class="p-4 font-medium">${u.full_name || 'No Name'}<br><span class="text-xs text-gray-400">${u.email}</span></td>
                        <td class="p-4">${roleButton}</td>
                        <td class="p-4 text-gray-500 text-sm">${formatDate(u.created_at)}</td>
                        <td class="p-4">${deleteBtn}</td>
                    </tr>`;
            });
        }

        async function changeRole(userId, newRole) {
            if (newRole === 'admin' && !confirm("C·∫¢NH B√ÅO: C·∫•p quy·ªÅn Admin c√≥ th·ªÉ g√¢y r·ªßi ro b·∫£o m·∫≠t. Ti·∫øp t·ª•c?")) return;
            await _supabase.from('profiles').update({ role: newRole }).eq('id', userId);
            loadUsers();
        }

        async function deleteUser(userId) {
            const { data: orders } = await _supabase.from('orders').select('id').eq('user_id', userId).eq('status', 'pending');
            if (orders && orders.length > 0) return alert("Ng∆∞·ªùi d√πng n√†y ƒëang c√≥ ƒë∆°n h√†ng ch∆∞a x·ª≠ l√Ω. Kh√¥ng th·ªÉ x√≥a!");
            if(!confirm("X√°c nh·∫≠n x√≥a Vƒ®NH VI·ªÑN ng∆∞·ªùi d√πng n√†y?")) return;
            await _supabase.from('profiles').delete().eq('id', userId);
            alert("ƒê√£ x√≥a ng∆∞·ªùi d√πng.");
            loadUsers();
        }

        // --- PH·∫¶N 3: C·∫§U H√åNH ---
        async function loadSettingsAdmin() {
            const { data } = await _supabase.from('settings').select('*').single();
            if(data) {
                document.getElementById('set-page-price').value = data.price_per_page;
                document.getElementById('set-board-price').value = data.price_per_board;
                document.getElementById('set-density').value = data.density_fee_percent;
            }
        }
        async function saveSettings() {
            const { data } = await _supabase.from('settings').select('id').single();
            await _supabase.from('settings').update({
                price_per_page: document.getElementById('set-page-price').value,
                price_per_board: document.getElementById('set-board-price').value,
                density_fee_percent: document.getElementById('set-density').value
            }).eq('id', data.id);
            alert("ƒê√£ l∆∞u c·∫•u h√¨nh gi√° m·ªõi!");
        }

        // --- REALTIME ---
        function setupRealtime() {
            _supabase.channel('admin-orders')
                .on('postgres_changes', { event: '*', schema: 'public', table: 'orders' }, () => {
                    loadOrders(); // T·ª± ƒë·ªông reload khi c√≥ thay ƒë·ªïi t·ª´ b·∫•t k·ª≥ ƒë√¢u
                })
                .subscribe();
        }
    </script>
</body>
</html>
