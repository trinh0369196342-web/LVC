<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Snake Arena Online</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Overlay Loading -->
    <div id="loading-overlay">
        <div class="loading-spinner"></div>
        <div id="loading-text">ƒêang k·∫øt n·ªëi...</div>
    </div>

    <!-- M√†n h√¨nh ƒëƒÉng nh·∫≠p -->
    <div id="login-screen" class="screen">
        <div class="login-container">
            <div class="game-title">
                <h1>üêç SNAKE ARENA</h1>
                <p class="subtitle">Battle Royale Online</p>
            </div>
            
            <div class="login-form">
                <div class="input-group">
                    <i class="fas fa-user"></i>
                    <input type="text" id="username" placeholder="T√™n ng∆∞·ªùi ch∆°i" maxlength="20">
                </div>
                <div class="input-group">
                    <i class="fas fa-lock"></i>
                    <input type="password" id="password" placeholder="M·∫≠t kh·∫©u (t√πy ch·ªçn)">
                </div>
                <button id="btn-login" class="btn-primary">
                    <i class="fas fa-play"></i> B·∫ÆT ƒê·∫¶U CH∆†I
                </button>
                <p class="guest-note">Kh√¥ng c·∫ßn ƒëƒÉng k√Ω, ch∆°i ngay!</p>
            </div>
            
            <div class="game-stats">
                <div class="stat">
                    <i class="fas fa-users"></i>
                    <span id="online-count">0</span> ƒëang ch∆°i
                </div>
                <div class="stat">
                    <i class="fas fa-trophy"></i>
                    <span id="top-score">0</span> ƒëi·ªÉm cao nh·∫•t
                </div>
            </div>
        </div>
    </div>

    <!-- M√†n h√¨nh ch√≠nh -->
    <div id="main-screen" class="screen hidden">
        <div class="game-header">
            <!-- Th√¥ng tin ng∆∞·ªùi ch∆°i -->
            <div class="player-info">
                <div class="player-avatar">
                    <span id="player-initial">A</span>
                </div>
                <div class="player-details">
                    <h3 id="player-name">Anonymous</h3>
                    <div class="player-stats">
                        <span class="stat"><i class="fas fa-star"></i> Level <span id="player-level">1</span></span>
                        <span class="stat"><i class="fas fa-trophy"></i> <span id="player-score">0</span></span>
                    </div>
                </div>
            </div>

            <!-- Th√¥ng tin ƒë·ªôi -->
            <div class="team-info">
                <div id="team-display" class="hidden">
                    <h4><i class="fas fa-users"></i> <span id="team-name">ƒê·ªôi c·ªßa b·∫°n</span></h4>
                    <div id="team-members"></div>
                </div>
                <div id="no-team">
                    <p>Ch∆∞a c√≥ ƒë·ªôi</p>
                    <button id="btn-create-team" class="btn-small">
                        <i class="fas fa-plus"></i> T·∫°o ƒë·ªôi
                    </button>
                    <button id="btn-join-team" class="btn-small">
                        <i class="fas fa-sign-in-alt"></i> Tham gia
                    </button>
                </div>
            </div>

            <!-- Th√¥ng tin game -->
            <div class="game-info">
                <div class="info-box">
                    <h4><i class="fas fa-map"></i> ARENA</h4>
                    <p>Players: <span id="game-players">0/50</span></p>
                    <p>Status: <span id="game-status">Waiting</span></p>
                </div>
                <button id="btn-leave-game" class="btn-danger hidden">
                    <i class="fas fa-sign-out-alt"></i> R·ªùi game
                </button>
            </div>
        </div>

        <!-- Khu v·ª±c game ch√≠nh -->
        <div class="game-container">
            <!-- Canvas ch√≠nh -->
            <div class="main-game">
                <canvas id="game-canvas"></canvas>
                <div id="game-overlay" class="hidden">
                    <h2>GAME OVER</h2>
                    <p>ƒêi·ªÉm: <span id="final-score">0</span></p>
                    <button id="btn-play-again" class="btn-primary">
                        <i class="fas fa-redo"></i> Ch∆°i l·∫°i
                    </button>
                </div>
            </div>

            <!-- Mini Map -->
            <div class="mini-map-container">
                <div class="mini-map-header">
                    <h4><i class="fas fa-map-marked-alt"></i> MINI MAP</h4>
                    <div class="map-legend">
                        <div class="legend-item">
                            <span class="legend-color" style="background-color: #3498db;"></span>
                            <span>ƒê·ªìng ƒë·ªôi</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background-color: #e74c3c;"></span>
                            <span>ƒê·ªãch</span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-color" style="background-color: #2ecc71;"></span>
                            <span>Th·ª©c ƒÉn</span>
                        </div>
                    </div>
                </div>
                <canvas id="mini-map"></canvas>
                <div class="mini-map-controls">
                    <button id="btn-zoom-in" class="btn-icon"><i class="fas fa-search-plus"></i></button>
                    <button id="btn-zoom-out" class="btn-icon"><i class="fas fa-search-minus"></i></button>
                    <button id="btn-center-map" class="btn-icon"><i class="fas fa-crosshairs"></i></button>
                </div>
            </div>
        </div>

        <!-- Th√¥ng tin ƒëi·ªÅu khi·ªÉn -->
        <div class="controls-panel">
            <div class="controls-info">
                <h4><i class="fas fa-gamepad"></i> ƒêI·ªÄU KHI·ªÇN</h4>
                <div class="controls-list">
                    <div class="control-item">
                        <span class="key">W/A/S/D</span>
                        <span>Di chuy·ªÉn</span>
                    </div>
                    <div class="control-item">
                        <span class="key">SPACE</span>
                        <span>TƒÉng t·ªëc</span>
                    </div>
                    <div class="control-item">
                        <span class="key">M</span>
                        <span>B·∫≠t/t·∫Øt mini map</span>
                    </div>
                    <div class="control-item">
                        <span class="key">T</span>
                        <span>Chat ƒë·ªôi</span>
                    </div>
                </div>
            </div>

            <!-- Danh s√°ch ng∆∞·ªùi ch∆°i -->
            <div class="players-list">
                <h4><i class="fas fa-list-ol"></i> B·∫¢NG X·∫æP H·∫†NG</h4>
                <div id="leaderboard">
                    <!-- ƒê∆∞·ª£c t·∫°o ƒë·ªông b·∫±ng JavaScript -->
                </div>
            </div>

            <!-- Chat box -->
            <div class="chat-box">
                <div class="chat-header">
                    <h4><i class="fas fa-comments"></i> TR√í CHUY·ªÜN</h4>
                    <select id="chat-type">
                        <option value="global">To√†n game</option>
                        <option value="team">ƒê·ªôi</option>
                    </select>
                </div>
                <div id="chat-messages"></div>
                <div class="chat-input">
                    <input type="text" id="chat-input" placeholder="Nh·∫Øn tin...">
                    <button id="btn-send" class="btn-icon">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- Modal t·∫°o ƒë·ªôi -->
        <div id="team-modal" class="modal hidden">
            <div class="modal-content">
                <h3><i class="fas fa-users"></i> T·∫†O ƒê·ªòI M·ªöI</h3>
                <div class="input-group">
                    <input type="text" id="team-name-input" placeholder="T√™n ƒë·ªôi" maxlength="20">
                </div>
                <div class="input-group">
                    <input type="text" id="team-tag-input" placeholder="Tag ƒë·ªôi (VD: ABC)" maxlength="4">
                </div>
                <div class="input-group">
                    <select id="team-privacy">
                        <option value="public">C√¥ng khai</option>
                        <option value="private">Ri√™ng t∆∞</option>
                        <option value="password">C√≥ m·∫≠t kh·∫©u</option>
                    </select>
                </div>
                <div class="input-group hidden" id="team-password-group">
                    <input type="password" id="team-password" placeholder="M·∫≠t kh·∫©u ƒë·ªôi">
                </div>
                <div class="modal-buttons">
                    <button id="btn-confirm-create" class="btn-primary">T·∫°o ƒë·ªôi</button>
                    <button id="btn-cancel-create" class="btn-secondary">H·ªßy</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="game.js"></script>
</body>
</html>